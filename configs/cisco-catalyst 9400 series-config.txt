=== NETWORK ARCHITECTURE OVERVIEW ===

Network Architecture Requirements:
- Centralized ISP customer service hub supporting customer self-service, diagnostics, and remote management.
- Segregated VLANs for Customer Network (172.16.0.0/16), Diagnostic Tools (192.168.100.0/24), and Support Portal (10.300.0.0/24).
- Automated network diagnostics, troubleshooting, and performance analytics.
- Secure remote device management and customer communication automation.
- Service level monitoring, speed testing, and automated ticket creation.
- Strict access controls, AAA, and encrypted management.
- High-availability, rapid convergence, and robust monitoring/logging.

=== DEVICE 1: CISCO-CORE ===

! ===== SECTION: Basic Device Configuration =====
hostname CISCO-CORE
enable secret 9 $9$w7d2kJ8l$5nQk1Q8u2e1n3s8
username admin privilege 15 secret 9 $9$Yt4kL2pQ$9nT6uK1p3s7w
username diaguser privilege 10 secret 9 $9$Xy7pQ2lN$5mK8uP2n1r4s
service password-encryption
service timestamps debug datetime localtime
service timestamps log datetime localtime
no service pad
no ip source-route
no ip http server
no ip finger
no ip bootp server
no cdp run
banner motd ^C
******************************************************************
*  Unauthorized access to this device is prohibited.              *
*  All activities are monitored and logged.                       *
^C
clock timezone UTC 0 0
ip domain-name isp-customerhub.local
ip name-server 8.8.8.8
ip name-server 1.1.1.1
crypto key generate rsa modulus 2048
ip ssh version 2
ip ssh time-out 60
ip ssh authentication-retries 3
ip ssh logging events
ip ssh pubkey-chain
 username admin
  key-string
   ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC...
  exit
!
ip ssh source-interface Loopback0
!
! ===== END SECTION =====

! ===== SECTION: Security Hardening =====
aaa new-model
aaa authentication login default local
aaa authentication login CONSOLE local
aaa authorization exec default local
aaa session-id common
login block-for 300 attempts 3 within 120
security passwords min-length 12
security passwords lifetime 180
security passwords history 10
service password-recovery
ip access-list standard MGMT-ACCESS
 permit 192.168.100.0 0.0.0.255
 permit 10.300.0.0 0.0.0.255
 deny   any
!
ip access-list extended ACL-ADMIN-ACCESS
 permit tcp 192.168.100.0 0.0.0.255 any eq 22
 permit tcp 10.300.0.0 0.0.0.255 any eq 22
 deny ip any any log
!
ip access-list extended ACL-DIAG-TOOLS
 permit ip 192.168.100.0 0.0.0.255 172.16.0.0 0.0.255.255
 deny ip any any log
!
ip access-list extended ACL-SUPPORT-PORTAL
 permit ip 10.300.0.0 0.0.0.255 172.16.0.0 0.0.255.255
 deny ip any any log
!
ip access-list extended ACL-CUSTOMER-SELF-SERVICE
 permit tcp 172.16.0.0 0.0.255.255 10.300.0.0 0.0.0.255 eq 443
 permit tcp 172.16.0.0 0.0.255.255 10.300.0.0 0.0.0.255 eq 80
 deny ip any any log
!
ip ssh access-group MGMT-ACCESS
!
line console 0
 login authentication CONSOLE
 exec-timeout 10 0
 logging synchronous
 privilege level 15
!
line vty 0 4
 access-class MGMT-ACCESS in
 transport input ssh
!
line vty 5 15
!
no ip http secure-server
no ip identd
no service tcp-small-servers
no service udp-small-servers
no ip proxy-arp
no ip directed-broadcast
ip tcp synwait-time 10
ip tcp intercept list ACL-ADMIN-ACCESS
ip tcp intercept mode intercept
ip tcp intercept connection-timeout 30
ip tcp intercept max-incomplete high 500
ip tcp intercept max-incomplete low 400
ip tcp intercept one-minute high 1000
ip tcp intercept one-minute low 900
ip arp inspection vlan 10,20,30
ip dhcp snooping
ip dhcp snooping vlan 10,20,30
ip dhcp snooping information option
ip dhcp snooping database flash:dhcp_snoop.db
spanning-tree portfast bpduguard default
spanning-tree guard root
!
! ===== END SECTION =====

! ===== SECTION: Interface Configuration =====
vlan 10
 name CUSTOMER-NET
vlan 20
 name DIAG-TOOLS
vlan 30
 name SUPPORT-PORTAL
!
interface Loopback0
 description Management Loopback
 ip address 192.168.100.254 255.255.255.255
!
interface GigabitEthernet0/0
 description Uplink to ISP Core
 ip address dhcp
 no shutdown
!
interface GigabitEthernet0/1
 description Customer Network Uplink
 switchport mode access
 switchport access vlan 10
 switchport port-security
 switchport port-security maximum 3
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 spanning-tree bpduguard enable
 storm-control broadcast level 1.00
 no shutdown
!
interface GigabitEthernet0/2
 description Diagnostic Tools Segment
 switchport mode access
 switchport access vlan 20
 switchport port-security
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 spanning-tree bpduguard enable
 storm-control broadcast level 1.00
 no shutdown
!
interface GigabitEthernet0/3
 description Support Portal Segment
 switchport mode access
 switchport access vlan 30
 switchport port-security
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 spanning-tree portfast
 spanning-tree bpduguard enable
 storm-control broadcast level 1.00
 no shutdown
!
interface GigabitEthernet0/4
 description Trunk to Distribution Switch
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 10
 switchport trunk allowed vlan 10,20,30
 spanning-tree portfast trunk
 spanning-tree bpduguard enable
 storm-control broadcast level 1.00
 no shutdown
!
interface Vlan10
 description SVI for Customer Network
 ip address 172.16.0.1 255.255.0.0
 ip helper-address 192.168.100.10
 no shutdown
!
interface Vlan20
 description SVI for Diagnostic Tools
 ip address 192.168.100.1 255.255.255.0
 no shutdown
!
interface Vlan30
 description SVI for Support Portal
 ip address 10.300.0.1 255.255.255.0
 no shutdown
!
! ===== END SECTION =====

! ===== SECTION: Routing & Switching =====
ip routing
ip route 0.0.0.0 0.0.0.0 dhcp
ip route 192.168.100.0 255.255.255.0 Vlan20
ip route 10.300.0.0 255.255.255.0 Vlan30
ip route 172.16.0.0 255.255.0.0 Vlan10
!
router ospf 100
 router-id 192.168.100.254
 passive-interface default
 no passive-interface Vlan10
 no passive-interface Vlan20
 no passive-interface Vlan30
 no passive-interface Loopback0
 network 172.16.0.0 0.0.255.255 area 0
 network 192.168.100.0 0.0.0.255 area 0
 network 10.300.0.0 0.0.0.255 area 0
 network 192.168.100.254 0.0.0.0 area 0
!
spanning-tree mode rapid-pvst
spanning-tree extend system-id
spanning-tree vlan 10,20,30 priority 4096
!
! ===== END SECTION =====

! ===== SECTION: Monitoring & Management =====
logging buffered 32768
logging console warnings
logging monitor informational
logging trap notifications
logging host 192.168.100.50
logging host 10.300.0.50
logging source-interface Loopback0
snmp-server community DIAG-RO RO 99
snmp-server community DIAG-RW RW 99
snmp-server location ISP-Customer-Hub
snmp-server contact support@isp-customerhub.local
snmp-server enable traps snmp authentication linkdown linkup coldstart warmstart
snmp-server host 192.168.100.50 version 2c DIAG-RO
snmp-server host 10.300.0.50 version 2c DIAG-RO
snmp-server trap-source Loopback0
ntp authenticate
ntp authentication-key 1 md5 7 08314D5D1A334B4A
ntp trusted-key 1
ntp server 192.168.100.100 key 1 prefer
ntp server 10.300.0.100 key 1
ip sla 1
 icmp-echo 8.8.8.8 source-interface Vlan20
 frequency 60
ip sla schedule 1 life forever start-time now
ip sla 2
 icmp-echo 1.1.1.1 source-interface Vlan30
ip sla schedule 2 life forever start-time now
track 1 ip sla 1 reachability
track 2 ip sla 2 reachability
event manager applet SLA-FAILURE
 event track 1 state down
 action 1.0 syslog msg "IP SLA 1 (8.8.8.8) unreachable from Diagnostic Tools"
 event track 2 state down
 action 2.0 syslog msg "IP SLA 2 (1.1.1.1) unreachable from Support Portal"
!
! ===== END SECTION =====

! ===== SECTION: Production Readiness =====
interface Port-channel1
 description Uplink Aggregation to Core
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk native vlan 10
 switchport trunk allowed vlan 10,20,30
!
interface GigabitEthernet0/5
 description Uplink Member 1
 channel-group 1 mode active
 no shutdown
!
interface GigabitEthernet0/6
 description Uplink Member 2
 channel-group 1 mode active
 no shutdown
!
errdisable recovery cause bpduguard
errdisable recovery interval 60
service sequence-numbers
archive
 path flash:archive-config
 write-memory
 time-period 1440
!
file prompt quiet
copy running-config startup-config
!
! ===== END SECTION =====

=== VERIFICATION PROCEDURES ===

Verification Procedures:
- show running-config | section hostname|username|aaa|banner|crypto|ssh
- show interfaces status
- show vlan brief
- show ip interface brief
- show spanning-tree summary
- show port-security address
- show ip route
- show ip ospf neighbor
- show access-lists
- show logging
- show snmp community
- show ntp associations
- show ip sla statistics
- show archive
- Test SSH access from authorized management networks
- Test connectivity between VLANs as per ACLs
- Validate OSPF neighbor relationships and routing table
- Confirm SNMP traps and syslog messages are received by monitoring hosts
- Verify port-channel status and spanning-tree operation
- Simulate SLA failures and confirm syslog/event manager actions